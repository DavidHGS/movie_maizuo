{"remainingRequest":"E:\\vue_workspace\\movie\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js!E:\\vue_workspace\\movie\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js!E:\\vue_workspace\\movie\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--0-0!E:\\vue_workspace\\movie\\node_modules\\_vue-loader@15.9.0@vue-loader\\lib\\index.js??vue-loader-options!E:\\vue_workspace\\movie\\src\\views\\film\\nowplaying.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\vue_workspace\\movie\\src\\views\\film\\nowplaying.vue","mtime":1584385765074},{"path":"E:\\vue_workspace\\movie\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_workspace\\movie\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_workspace\\movie\\node_modules\\_babel-loader@8.0.6@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\vue_workspace\\movie\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\vue_workspace\\movie\\node_modules\\_vue-loader@15.9.0@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkU6XFx2dWVfd29ya3NwYWNlXFxtb3ZpZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmltcG9ydCB7IEluZGljYXRvciB9IGZyb20gIm1pbnQtdWkiOwppbXBvcnQgeyBJbmZpbml0ZVNjcm9sbCB9IGZyb20gIm1pbnQtdWkiOwpWdWUudXNlKEluZmluaXRlU2Nyb2xsKTsKVnVlLmZpbHRlcigiYWN0b3JmaWx0ZXIiLCBmdW5jdGlvbiAoZGF0YSkgewogIHZhciBuZXdsaXN0ID0gZGF0YS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLm5hbWU7CiAgfSk7CiAgcmV0dXJuIG5ld2xpc3Quam9pbigiICIpOwp9KTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhTGlzdDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBjdXJyZW50OiAxLAogICAgICB0b3RhbDogMCwKICAgICAgaXNTaG93OiB0cnVlLAogICAgICBjaXR5SWQ6ICIiCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJpc05vd3BsYXlpbmciLCB0cnVlKTsKICAgIEluZGljYXRvci5vcGVuKHsKICAgICAgdGV4dDogIuWKoOi9veS4rS4uLiIsCiAgICAgIHNwaW5uZXJUeXBlOiAiZmFkaW5nLWNpcmNsZSIKICAgIH0pOwogICAgdGhpcy5jaXR5SWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiY2l0eUlkIikgfHwgNTEwMTAwOwogICAgYXhpb3MoewogICAgICB1cmw6IC8vaHR0cHM6Ly9tLm1haXp1by5jb20vZ2F0ZXdheT90eXBlPTImY2l0eUlkPTExMDEwMCZrPTU1NTMzODcKICAgICAgImh0dHBzOi8vbS5tYWl6dW8uY29tL2dhdGV3YXk/Y2l0eUlkPSIuY29uY2F0KHRoaXMuY2l0eUlkLCAiJnBhZ2VOdW09MSZwYWdlU2l6ZT0xMCZ0eXBlPTEmaz00OTQ1OTQ0IiksCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiWC1DbGllbnQtSW5mbyI6ICd7ImEiOiIzMDAwIiwiY2giOiIxMDAyIiwidiI6IjUuMC40IiwiZSI6IjE1ODQxMDQ5Nzk3Njg3OTkxNDYwODciLCJiYyI6IjQyOTAwNCJ9JywKICAgICAgICAiWC1Ib3N0IjogIm1hbGwuZmlsbS10aWNrZXQuZmlsbS5saXN0IgogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgX3RoaXMuZGF0YUxpc3QgPSByZXMuZGF0YS5kYXRhLmZpbG1zOwogICAgICBfdGhpcy50b3RhbCA9IHJlcy5kYXRhLmRhdGEudG90YWw7CiAgICAgIEluZGljYXRvci5jbG9zZSgpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaGFuZ2VQYWdlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VQYWdlKGlkKSB7CiAgICAgIC8v57yW56iL5byP5a+86IiqLS3ot6/lvoTot7PovawKICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goYC9kZXRhaWwvJHtpZH1gKQogICAgICAvL+e8lueoi+W8j+WvvOiIqi0t5ZCN5a2X6Lez6L2sCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAiZGV0YWlsIiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGlkOiBpZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbG9hZE1vcmU6IGZ1bmN0aW9uIGxvYWRNb3JlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7IC8v56aB55SobG9hZGluZwoKICAgICAgdGhpcy5jdXJyZW50Kys7CgogICAgICBpZiAodGhpcy5kYXRhTGlzdC5sZW5ndGggPT09IHRoaXMudG90YWwpIHsKICAgICAgICB0aGlzLmlzU2hvdyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXhpb3MoewogICAgICAgIHVybDogLy9odHRwczovL20ubWFpenVvLmNvbS9nYXRld2F5P3R5cGU9MiZjaXR5SWQ9MTEwMTAwJms9NTU1MzM4NwogICAgICAgICJodHRwczovL20ubWFpenVvLmNvbS9nYXRld2F5P2NpdHlJZD0iLmNvbmNhdCh0aGlzLmNpdHlJZCwgIiZwYWdlTnVtPSIpLmNvbmNhdCh0aGlzLmN1cnJlbnQsICImcGFnZVNpemU9MTAmdHlwZT0xJms9NDk0NTk0NCIpLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJYLUNsaWVudC1JbmZvIjogJ3siYSI6IjMwMDAiLCJjaCI6IjEwMDIiLCJ2IjoiNS4wLjQiLCJlIjoiMTU4NDEwNDk3OTc2ODc5OTE0NjA4NyIsImJjIjoiNDI5MDA0In0nLAogICAgICAgICAgIlgtSG9zdCI6ICJtYWxsLmZpbG0tdGlja2V0LmZpbG0ubGlzdCIKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5kYXRhTGlzdCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoX3RoaXMyLmRhdGFMaXN0KSwgX3RvQ29uc3VtYWJsZUFycmF5KHJlcy5kYXRhLmRhdGEuZmlsbXMpKTsKICAgICAgICBJbmRpY2F0b3IuY2xvc2UoKTsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["nowplaying.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,SAAA,QAAA,SAAA;AACA,SAAA,cAAA,QAAA,SAAA;AAEA,GAAA,CAAA,GAAA,CAAA,cAAA;AAEA,GAAA,CAAA,MAAA,CAAA,aAAA,EAAA,UAAA,IAAA,EAAA;AACA,MAAA,OAAA,GAAA,IAAA,CAAA,GAAA,CAAA,UAAA,IAAA;AAAA,WAAA,IAAA,CAAA,IAAA;AAAA,GAAA,CAAA;AACA,SAAA,OAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,CAHA;AAIA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA,CAHA;AAIA,MAAA,KAAA,EAAA,CAJA;AAKA,MAAA,MAAA,EAAA,IALA;AAMA,MAAA,MAAA,EAAA;AANA,KAAA;AAQA,GAVA;AAWA,EAAA,OAXA,qBAWA;AAAA;;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,IAAA;AACA,IAAA,SAAA,CAAA,IAAA,CAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,WAAA,EAAA;AAFA,KAAA;AAIA,SAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,QAAA,KAAA,MAAA;AACA,IAAA,KAAA,CAAA;AACA,MAAA,GAAA,EACA;AADA,oDAEA,KAAA,MAFA,4CADA;AAIA,MAAA,OAAA,EAAA;AACA,yBACA,iFAFA;AAGA,kBAAA;AAHA;AAJA,KAAA,CAAA,CASA,IATA,CASA,UAAA,GAAA,EAAA;AACA,MAAA,KAAA,CAAA,QAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,MAAA,KAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,MAAA,SAAA,CAAA,KAAA;AACA,KAbA;AAcA,GAhCA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,4BACA,EADA,EACA;AACA;AACA;AACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,EAAA,EAAA;AAAA;AAAA,OAAA;AACA,KANA;AAOA,IAAA,QAPA,sBAOA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA,CADA,CACA;;AACA,WAAA,OAAA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,KAAA,KAAA,KAAA,EAAA;AACA,aAAA,MAAA,GAAA,KAAA;AACA;AACA;;AACA,MAAA,KAAA,CAAA;AACA,QAAA,GAAA,EACA;AADA,sDAEA,KAAA,MAFA,sBAEA,KAAA,OAFA,kCADA;AAIA,QAAA,OAAA,EAAA;AACA,2BACA,iFAFA;AAGA,oBAAA;AAHA;AAJA,OAAA,CAAA,CASA,IATA,CASA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,gCAAA,MAAA,CAAA,QAAA,sBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA;AACA,QAAA,SAAA,CAAA,KAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAbA;AAcA;AA5BA;AAjCA,CAAA","sourcesContent":["<template>\r\n  <div class=\"nowPlayingList-wrap\">\r\n    <ul\r\n      v-infinite-scroll=\"loadMore\"\r\n      infinite-scroll-disabled=\"loading\"\r\n      infinite-scroll-distance=\"0\"\r\n      infinite-scroll-immediate-check=\"false\"\r\n    >\r\n      <li\r\n        class=\"nowPlayingFilm-item\"\r\n        v-for=\"data in dataList\"\r\n        :key=\"data.filmId\"\r\n        @click=\"handleChangePage(data.filmId)\"\r\n      >\r\n        <div class=\"nowPlayingFilm-wrap\">\r\n          <div\r\n            class=\"lazy-img nowPlayingFilm-img\"\r\n            alt=\"film\"\r\n            style=\"width: 66px; height: 94px; background: rgb(249, 249, 249); float: left;\"\r\n          >\r\n            <div\r\n              class=\"lazy-img-wrap\"\r\n              style=\"width: 66px; height: 94px; background: rgb(249, 249, 249); opacity: 1; display: block;\"\r\n            >\r\n              <img :src=\"data.poster\" class=\"target-img\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"nowPlayingFilm-info\" style=\"float: left;\">\r\n            <div class=\"nowPlayingFilm-name info-col\">\r\n              <span class=\"name\">{{ data.name }}</span\r\n              ><span class=\"item\">{{ data.filmType.name }}</span>\r\n            </div>\r\n            <div\r\n              class=\"nowPlayingFilm-grade info-col\"\r\n              style=\"visibility: visible;\"\r\n            >\r\n              <span class=\"label\">观众评分 </span\r\n              ><span class=\"grade\">{{ data.grade }}</span>\r\n            </div>\r\n            <div class=\"nowPlayingFilm-actors info-col\">\r\n              <span class=\"label\">主演：{{ data.actors | actorfilter }}</span>\r\n            </div>\r\n            <div class=\"nowPlayingFilm-detail info-col\">\r\n              <span class=\"label\"\r\n                >{{ data.nation }} | {{ data.runtime }}分钟</span\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <div v-if=\"isShow\">正在加载中...</div>\r\n    <div v-else>我是有底线的...</div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport Vue from \"vue\";\r\nimport { Indicator } from \"mint-ui\";\r\nimport { InfiniteScroll } from \"mint-ui\";\r\n\r\nVue.use(InfiniteScroll);\r\n\r\nVue.filter(\"actorfilter\", data => {\r\n  var newlist = data.map(item => item.name);\r\n  return newlist.join(\" \");\r\n});\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      loading: false,\r\n      current: 1,\r\n      total: 0,\r\n      isShow: true,\r\n      cityId: \"\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$store.commit(\"isNowplaying\", true);\r\n    Indicator.open({\r\n      text: \"加载中...\",\r\n      spinnerType: \"fading-circle\"\r\n    });\r\n    this.cityId = localStorage.getItem(\"cityId\") || 510100;\r\n    axios({\r\n      url:\r\n        //https://m.maizuo.com/gateway?type=2&cityId=110100&k=5553387\r\n        `https://m.maizuo.com/gateway?cityId=${this.cityId}&pageNum=1&pageSize=10&type=1&k=4945944`,\r\n      headers: {\r\n        \"X-Client-Info\":\r\n          '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.0.4\",\"e\":\"1584104979768799146087\",\"bc\":\"429004\"}',\r\n        \"X-Host\": \"mall.film-ticket.film.list\"\r\n      }\r\n    }).then(res => {\r\n      this.dataList = res.data.data.films;\r\n      this.total = res.data.data.total;\r\n      Indicator.close();\r\n    });\r\n  },\r\n  methods: {\r\n    handleChangePage(id) {\r\n      //编程式导航--路径跳转\r\n      // this.$router.push(`/detail/${id}`)\r\n      //编程式导航--名字跳转\r\n      this.$router.push({ name: \"detail\", params: { id } });\r\n    },\r\n    loadMore() {\r\n      this.loading = true; //禁用loading\r\n      this.current++;\r\n      if (this.dataList.length === this.total) {\r\n        this.isShow = false;\r\n        return;\r\n      }\r\n      axios({\r\n        url:\r\n          //https://m.maizuo.com/gateway?type=2&cityId=110100&k=5553387\r\n          `https://m.maizuo.com/gateway?cityId=${this.cityId}&pageNum=${this.current}&pageSize=10&type=1&k=4945944`,\r\n        headers: {\r\n          \"X-Client-Info\":\r\n            '{\"a\":\"3000\",\"ch\":\"1002\",\"v\":\"5.0.4\",\"e\":\"1584104979768799146087\",\"bc\":\"429004\"}',\r\n          \"X-Host\": \"mall.film-ticket.film.list\"\r\n        }\r\n      }).then(res => {\r\n        this.dataList = [...this.dataList, ...res.data.data.films];\r\n        Indicator.close();\r\n        this.loading = false;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.nowPlayingList-wrap li {\r\n  padding: 15px;\r\n  height: 94px;\r\n  position: relative;\r\n  .nowPlayingFilm-wrap {\r\n    display: -webkit-box;\r\n    display: -ms-flexbox;\r\n    display: flex;\r\n    -webkit-box-pack: start;\r\n    -ms-flex-pack: start;\r\n    justify-content: flex-start;\r\n    -webkit-box-align: center;\r\n    -ms-flex-align: center;\r\n    align-items: center;\r\n    .lazy-img {\r\n      position: relative;\r\n      .padding {\r\n        height: 56vw;\r\n        display: -webkit-box;\r\n        display: -ms-flexbox;\r\n        display: flex;\r\n        -webkit-box-pack: center;\r\n        -ms-flex-pack: center;\r\n        justify-content: center;\r\n        -webkit-box-align: center;\r\n        -ms-flex-align: center;\r\n        align-items: center;\r\n      }\r\n      .target-img {\r\n        width: 100%;\r\n        position: absolute;\r\n        top: 50%;\r\n        transform: translateY(-50%);\r\n        -ms-transform: translateY(-50%);\r\n        -moz-transform: translateY(-50%);\r\n        -webkit-transform: translateY(-50%);\r\n        -o-transform: translateY(-50%);\r\n      }\r\n    }\r\n  }\r\n  .nowPlayingFilm-info {\r\n    width: calc(100% - 116px);\r\n    padding: 0 10px;\r\n    .info-col {\r\n      overflow: hidden;\r\n      -o-text-overflow: ellipsis;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      width: 100%;\r\n      .name {\r\n        max-width: calc(100% - 25px);\r\n        color: #191a1b;\r\n        font-size: 16px;\r\n        height: 22px;\r\n        line-height: 22px;\r\n        margin-right: 5px;\r\n        overflow: hidden;\r\n        -o-text-overflow: ellipsis;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n      }\r\n      .item {\r\n        font-size: 9px;\r\n        color: #fff;\r\n        background-color: #d2d6dc;\r\n        height: 14px;\r\n        line-height: 14px;\r\n        padding: 0 2px;\r\n        border-radius: 2px;\r\n      }\r\n    }\r\n    .label {\r\n      font-size: 13px;\r\n      margin-top: 4px;\r\n      color: #797d82;\r\n    }\r\n    .grade {\r\n      color: #ffb232;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/film"}]}